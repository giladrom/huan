<ion-header no-border [ngClass]="fade-in">

  <ion-navbar color="secondary">
    <button ion-button menuToggle>
      <ion-icon name="menu" color="light" large></ion-icon>
    </button>

    <ion-title>
      Home
    </ion-title>

    <ion-buttons end>
      <button ion-button icon-only (click)="addTag()">
        <ion-icon name='add' color="light" large></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>
  <ion-toolbar>
    <ion-segment [(ngModel)]="viewMode" (ionChange)="updateView()">
      <ion-segment-button value="map">
        Map View
      </ion-segment-button>
      <ion-segment-button value="list">
        List View
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen no-padding no-bounce [ngClass]="fade-in">
  <!-- Main Map Display -->
  <div #mainmap id="mainmap"></div>
  <div #navbutton id="navbutton">
    <button ion-button id="action-button" (click)="showMyPets()">Show my Pets</button>
  </div>
  <!-- Tag List View -->
  <div #taglist id="taglist">
    <ion-list class="taglist">
      <ion-item *ngFor="let tag of (tag$ | async)" class="list-item">
        <ion-avatar item-start (click)="showInfoPopover(tag.tagId)">
          <img [src]="tag.img">
        </ion-avatar>
        <h1> {{ tag.name }} </h1>
        <h3 *ngIf="tag.lost" class="marked-lost" text-wrap>Marked as Lost {{ lastSeen(tag.markedlost) }}</h3>
        <h3 text-wrap>Last seen {{ lastSeen(tag.lastseen) }}</h3>
        <p *ngIf="getTownName(tag.tagId).length > 0" class="location-info">Near {{ getTownName(tag.tagId) }}</p>
        <p>
          <button ion-button class="list-button" (click)="editTag(tag.tagId)">
            Edit Info
          </button>
        </p>
      </ion-item>
      <ion-item *ngIf="(tag$ | async)?.length == 0" text-wrap id="page-main-title" no-lines>
        Your pets will appear here after you add them.
      </ion-item>
    </ion-list>
  </div>
</ion-content>